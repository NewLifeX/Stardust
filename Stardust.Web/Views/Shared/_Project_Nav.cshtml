@using Stardust.Data.Deployment;
@using Stardust.Data.Nodes;
@using Stardust.Data.Platform;
@{
    var obj = Model as Object;
    var path = Context.Request.Path + "";
    var projectId = Context.Request.Query["projectId"].ToInt(0);
    if (projectId == 0 && path.StartsWithIgnoreCase("/Platform/GalaxyProject"))
    {
        projectId = Context.Request.Query["Id"].ToInt(0);
    }

    var prj = GalaxyProject.FindById(projectId) ?? new GalaxyProject();

    var dic = new Dictionary<String, Object>();
    dic[prj.Name + ""] = "/Platform/GalaxyProject/Edit?Id=" + projectId;
    dic["节点"] = "/Nodes/Node?projectId=" + projectId;
    dic["节点在线"] = "/Nodes/NodeOnline?projectId=" + projectId;
    dic["Redis节点"] = "/Redis/RedisNode?projectId=" + projectId;
    dic["应用"] = "/Registry/App?projectId=" + projectId;
    dic["应用在线"] = "/Registry/AppOnline?projectId=" + projectId;
    dic["监控"] = "/Monitors/AppTracer?projectId=" + projectId;
    dic["配置"] = "/Configs/AppConfig?projectId=" + projectId;
    dic["发布"] = "/Deployment/AppDeploy?projectId=" + projectId;
    dic["资源"] = "/Deployment/AppResource?projectId=" + projectId;
}
@if (projectId > 0)
{
    <div class="navbar-collapse text-center">
        <ul class="nav nav-pills" style="margin-bottom: 10px; display: inline-block;float: none;">
            @foreach (var item in dic)
            {
                if (item.Value is IDictionary<String, Object> childs)
                {
                    <li role="presentation" class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">@item.Key <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            @foreach (var elm in childs)
                            {
                                var url = elm.Value + "";
                                var v = url.Substring(null, "?");
                                <li role="presentation" class="@(path.EqualIgnoreCase(v) ? "active" : "")">
                                    <a href="@url">@elm.Key</a>
                                </li>
                            }
                        </ul>
                    </li>
                }
                else
                {
                    var url = item.Value + "";
                    var v = url.Substring(null, "?");
                    <li role="presentation" class="@(path.EqualIgnoreCase(v) ? "active" : "")">
                        <a href="@url">@item.Key</a>
                    </li>
                }
            }
        </ul>
    </div>
}