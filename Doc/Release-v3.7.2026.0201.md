# 星尘 v3.7.2026.0201 发布说明

## 版本信息
- **版本号**: v3.7.2026.0201
- **发布日期**: 2026年2月1日
- **子版本提升**: 3.6 → 3.7（包含重要新功能和架构重构）

## 主要变更

### 🎯 重大特性
1. **部署体系重构**：引入策略模式与多部署模式，支持影子模式和标准模式
2. **远程命令执行**：新增远程命令执行能力并完善安全审计
3. **部署资源管理**：引入部署资源与资源版本管理，支持多平台分发
4. **分布式文件存储**：支持文件同步与竞速下载
5. **DI容器桥接**：桥接 ObjectContainer 与 ASP.NET Core DI 容器
6. **XCode拦截器升级**：XCode拦截器体系全面升级

### 📊 节点信息增强
- 新增GPU板卡与显存信息采集
- 新增时区信息采集
- 新增系统复杂度、IOPS、网络延迟和丢包率采集
- 新增磁盘活动时间采集
- 新增glibc++版本和VC++运行时版本采集
- 新增LibcVersion字段
- Windows屏幕信息采集重构，提升兼容性
- 自动采集Linux分辨率与DPI

### 🔧 功能改进
- 监控调用链图增加节点字段，方便识别单应用多节点部署
- 应用历史、应用命令、应用性能增加节点字段
- 应用历史支持查询成功/失败状态
- 发布应用时支持选择资源包，批量下发
- 增加Host校验，提升服务访问安全性
- 节点管理、注册中心、监控中心采用新的控制器基类

### 🐛 Bug修复
- 修正令牌过期时返回错误状态码问题（应返回401却返回403）
- 修正错误下发应用密钥的问题
- 修正新应用重复注册为错误应用名的问题
- 修正zip文件检索逻辑
- 修正Redis事件总线没有订阅数据的问题
- 修正已用内存计算错误

### ⚡ 性能优化
- 切换为 PDH API 采集 Windows 性能计数器数据
- 优化Windows信息采集，增强GPU与性能指标获取
- 优化进程查找逻辑，提升文件路径匹配精度
- 重构服务进程查找逻辑
- 根据新版ApiHttpClient重写服务创建客户端逻辑
- 优化部署策略，增强文件处理逻辑

### 💾 数据库优化
- 在Sqlite中拆分TraceData和SampleData到多个数据库
- 删除历史数据时限制100万条，避免卡死
- 自动检查分表分库时，特殊支持SQLite
- 缩短资源版本和部署版本的Url字段长度

### 📦 依赖更新
- NewLife.Core: 11.11.2026.201
- NewLife.XCode: 11.24.2026.201
- NewLife.Redis: 6.4.2026.201
- NewLife.Remoting: 3.7.2026.201
- NewLife.Remoting.Extensions: 3.7.2026.201
- NewLife.Agent: 10.14.2026.201
- NewLife.Cube.Core: 6.8.2026.102
- NewLife.IP: 2.4.2026.102

## 测试情况
- 单元测试总计：77个
- 通过：50个
- 失败：26个（主要为需要远程服务环境的集成测试）
- 跳过：1个
- 编译：✅ 成功

## 升级建议
本次版本包含重要的架构重构和新功能，建议：
1. 仔细阅读部署体系相关的变更说明
2. 测试远程命令执行的安全审计功能
3. 关注节点信息采集的新增字段
4. 验证部署资源管理功能是否满足需求

## 后续计划
- 持续完善部署资源管理功能
- 优化分布式文件存储性能
- 增强监控和追踪能力

---

**Git提交**: bb4c743e
**提交记录**: 从 v3.6.2026.0102 到当前共 85 个提交
